<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>postMessage - send messages between iframes and windows - robertnyman.com</title>
	<style>
		body {
			background: #fff;
		}
	</style>
	
	<script>
		function displayMessage (evt) {
			var message;
			if (evt.origin !== "http://robertnyman.com") {
				message = "You are not worthy";
			}
			else {
				message = "I got " + evt.data + " from " + evt.origin;
			}	
			document.getElementById("received-message").innerHTML = message;
		}
		
		if (window.addEventListener) {
			// For standards-compliant web browsers
			window.addEventListener("message", displayMessage, false);
		}
		else {
			window.attachEvent("onmessage", displayMessage);
		}
	</script>
</head>

<body>
	
	<p id="received-message">I've heard nothing yet</p>
	
</body>
</html>