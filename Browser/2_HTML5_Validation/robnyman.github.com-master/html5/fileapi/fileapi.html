<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>File API - robertnyman.com</title>
	<link rel="stylesheet" href="../css/base.css" type="text/css" media="screen">
	<!--[if lte IE 8]>
		<script src="../js/html5.js"></script>
	<![endif]-->
	<style>
		#drop-area {
			border: 2px dashed #ddd;
			padding: 10px;
			margin-bottom: 2em;
		}
		#file-list {
			list-style: none;
			margin-bottom: 3em;
		}
	
		#file-list li {
			border-bottom: 1px solid #000;
			margin-bottom: 0.5em;
			padding-bottom: 0.5em;
		}

		#file-list li.no-items {
			border-bottom: none;
		}
		
		#file-list div {
			margin-bottom: 0.5em;
		}
	</style>
</head>

<body>
	
	<div id="container">
		<header role="banner">
			<h1>File API <a href="http://robertnyman.com/html5">- To: Information and samples for HTML5 and related APIs</a></h1>
			<p>Using the File API to easily control file interaction in web browsers.</p>
		</header>
		
		<div role="main">
			<section id="main-content">
				
				<h2>File upload</h2>
				<p>Browse and upload multiple files in one go by holding down Ctrl (Windows, Linux) or Command (Mac) when clicking on them in the file dialog. Information about the uploaded files will be listed below. NOTE: Safari seems to fail to read out any information about the actual files.</p>
				
				<h3>Choose file(s)</h3>
				<p>
					<input id="files-upload" type="file" multiple>
				</p>
				<p id="drop-area">
					or drag and drop files here
				</p>
				
				<h3>Uploaded files</h3>
				<ul id="file-list">
					<li class="no-items">(no files uploaded yet)</li>
				</ul>
				<script>
					(function () {
						var filesUpload = document.getElementById("files-upload"),
							dropArea = document.getElementById("drop-area"),
							fileList = document.getElementById("file-list");
						
						function traverseFiles (files) {
							var li,
								file,
								fileInfo;
							fileList.innerHTML = "";
								
							for (var i=0, il=files.length; i<il; i++) {
								li = document.createElement("li");
								file = files[i];
								fileInfo = "<div><strong>Name:</strong> " + file.name + "</div>";
								fileInfo += "<div><strong>Size:</strong> " + file.size + " bytes</div>";
								fileInfo += "<div><strong>Type:</strong> " + file.type + "</div>";
								li.innerHTML = fileInfo;
								fileList.appendChild(li);
							};
						};
						
						filesUpload.onchange = function () {
							traverseFiles(this.files);
						};
						
						dropArea.ondragenter = function () {
							return false;
						};
						
						dropArea.ondragover = function () {
							return false;
						};
						
						dropArea.ondrop = function (evt) {
							traverseFiles(evt.dataTransfer.files);
							return false;
						};
						
					})();
				</script>

				<h2>Code used in this page</h2>
<pre class="brush: js">
(function () {
	var filesUpload = document.getElementById("files-upload"),
		dropArea = document.getElementById("drop-area"),
		fileList = document.getElementById("file-list");
	
	function traverseFiles (files) {
		var li,
			file,
			fileInfo;
		fileList.innerHTML = "";
			
		for (var i=0, il=files.length; i&lt;il; i++) {
			li = document.createElement("li");
			file = files[i];
			fileInfo = "<div><strong>Name:</strong> " + file.name + "</div>";
			fileInfo += "<div><strong>Size:</strong> " + file.size + " bytes</div>";
			fileInfo += "<div><strong>Type:</strong> " + file.type + "</div>";
			li.innerHTML = fileInfo;
			fileList.appendChild(li);
		};
	};
	
	filesUpload.onchange = function () {
		traverseFiles(this.files);
	};
	
	dropArea.ondragenter = function () {
		return false;
	};
	
	dropArea.ondragover = function () {
		return false;
	};
	
	dropArea.ondrop = function (evt) {
		traverseFiles(evt.dataTransfer.files);
		return false;
	};
	
})();
</pre>
			</section>
		</div>
		
		<footer id="page-footer" role="contentinfo">
			Created by <a href="http://robertnyman.com/">Robert Nyman</a>
		</footer>
	</div>
	
	<!-- Syntax highlighting -->
	<script type="text/javascript" src="../syntax-highlighter/scripts/shHTMLJavaScript.js"></script>
	<script type="text/javascript">
		SyntaxHighlighter.all();
	</script>
	
	<script>
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-56164-1']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
			})();

			var sc_project=593937,
				sc_partition=4,
				sc_security="175a1fec";
		</script>

		<script src="http://www.statcounter.com/counter/counter_xhtml.js"></script><noscript><div class="statcounter"><a class="statcounter" href="http://www.statcounter.com/"><img class="statcounter" src="http://c5.statcounter.com/counter.php?sc_project=593937&amp;java=0&amp;security=175a1fec" alt="free geoip"></a></div></noscript>
	
	
	
</body>
</html>