<HTML>
<head><script type="text/javascript" src="http://192.168.6.18/NEON/src/elements.js"></script>
<META HTTP-Equiv="quitbutton" Content="visibility:visible">
<!--meta http-equiv="push" content="passkey=123456" /-->   
<!--meta http-equiv="push" content="port=8080"/ -->
<!--meta http-equiv="push" content="start"/ -->
<META HTTP-Equiv="backbutton" Content="Visibility:Visible">
<META HTTP-Equiv="SIPbutton" Content="Visibility:Visible">
<META HTTP-Equiv="signalnavigate" content="Javascript:checkSignal('%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s')">

<TITLE>PushNavigate Tag Test </TITLE>
<script type="text/jscript">
    var Generic = new ActiveXObject("PocketBrowser.Generic");
    var SelectedItem = "";

    function GetSelectedvalue() {
        var indx = SelEvent.selectedIndex;
        SelectedItem = SelEvent.options[indx].value;
        doTest(SelectedItem);
    }

    function doTestEnable() {
        
        Generic.InvokeMETAFunction('push', 'unattended:enabled');
    }


    function doTestDisable() {
        alert("Disabled");
        Generic.InvokeMETAFunction('push', 'unattended:disabled');
    }
    function doTest(sw) {
        alert(sw);
        if (sw == 'javascript') {
          
           Generic.InvokeMETAFunction("push", "Detected:url('Javascript:doLocate('%s');')");
            //Generic.InvokeMETAFunction("push", "Detected:");
        }
        else if (sw == 'HTML') {
            alert("URLHTML");
            Generic.InvokeMETAFunction("push-detected", "url('http://192.168.6.18/pb3.x/index.html')");
        }
        else if (sw == 'Start')
            Generic.InvokeMETAFunction('push', 'start');
        else if (sw == 'Stop')
            Generic.InvokeMETAFunction('push', 'stop');
        else if (sw == 'Port 8080')
            Generic.InvokeMETAFunction('push', 'port:8080');
        else if (sw == 'Port 80')
            Generic.InvokeMETAFunction('push', 'port:88');
        else if (sw == 'PassKey On')
         Generic.InvokeMETAFunction('push', 'passkey:' + passkey.value);
        else if (sw == 'PassKey Off')
            Generic.InvokeMETAFunction('push', 'passkey:');
        else if (sw == 'Path') {
            alert("Path text field value" + Path.value);
            Generic.InvokeMETAFunction('push', 'path:' + Path.value);
        }
        else if (sw == 'Response') {
            alert("Responce text field value" + Response.value);
            Generic.InvokeMETAFunction('push', 'response:'+Response.value);
        }

        else if (sw == 'No Action')
            Generic.InvokeMETAFunction('push-detected', '');
        else if (sw == 'Reset Action')
            Generic.InvokeMETAFunction("push-detected", "url('Javascript:doLocate(\'%s\');')");

    }

    var Generic = new ActiveXObject("PocketBrowser.Generic");
    var bNotify = false;
    /******************************************************************************
    *  This function is triggered when the device is pushed to by the client
    *  pc.  It identifies the action to do based on the first querystring value.
    * ***************************************************************************/
    function doLocate(func) {

        if (func == 'locate') {
            locatediv.innerHTML = '<center><pre>Someone is trying to locate this device<br><br><input type="button" value="CANCEL" onclick="bNotify=false;locatediv.innerHTML=\'\';"></center></pre>';
            bNotify = true;
        }
        else {
            locatediv.innerHTML = '';
            bNotify = false;
        }


    }

    //this funciton performs the notification

    function running() {
        if (bNotify) {

            //Generic.InvokeMETAFunction('invokenotification', '2, 4000, 1, 500');
            //Generic.InvokeMETAFunction('invokenotification', '0, 200, 100, 1');
        }
        tmr = setTimeout('running()', 2000);

    }
    running();


    /******************************************************************************
    *  This function simply outputs the ip information just so we don't have to
    *  look it up!
    * ***************************************************************************/
    function checkSignal(signal, essid, mac, adapt, dhcpsvr, dhcpstatic, gateway, ipadd) {
        if (signal == '%s')
            radiosig.innerHTML = "<pre>Not connected to network</pre>";
        else
            radiosig.innerHTML = "<pre>Signal: " + signal + "% ESSID: " + essid + " IP Address: " + ipadd + "</pre>";

    }	

</script>
</HEAD>


<BODY BGCOLOR="#FFFFEA" TEXT="#0000A0" LINK="#FF0000" VLINK="#808080" ALINK="#008040" >

<P>Start Push Navigate </P>
<P>Click on the buttons below to test the functionality...</P>
<div id="message">Message</div>
<br />
Select Event <select id="SelEvent" onchange="GetSelectedvalue();">
<OPTION value="" >Select option</OPTION>
<OPTION value="javascript">javascript</OPTION>
<OPTION value="HTML" >HTML</OPTION>
</select>

<P><BR><INPUT TYPE="button" VALUE="Start" ONCLICK="doTest(this.value);">&nbsp;<INPUT TYPE="button" VALUE="Stop" ONCLICK="doTest(this.value);"></P>
<P><INPUT TYPE="button" VALUE="Port 8080" ONCLICK="doTest(this.value);">&nbsp;<INPUT TYPE="button" VALUE="Port 88" ONCLICK="doTest(this.value);"></P>
<P><INPUT TYPE="button" VALUE="PassKey On" ONCLICK="doTest(this.value);">&nbsp;<INPUT TYPE="button" VALUE="PassKey Off" ONCLICK="doTest(this.value);"></P>
<P>PassKey = <INPUT TYPE="text" VALUE="123456" id="passkey"></P><br />
<P>Path:   = <INPUT TYPE="text" VALUE="/push" id="Path" onchange="doTest('Path');"></P><br />
<P>Response = <INPUT TYPE="text" VALUE="/Response.html" id="Response" onchange="doTest('Response');"></P>
<P><BR>Unattended:<br /><INPUT TYPE="button" VALUE="Enabled" ONCLICK="doTestEnable();">&nbsp;&nbsp;
<INPUT TYPE="button" VALUE="Disabled" ONCLICK="doTestDisable();"></P>

<P><INPUT TYPE="button" VALUE="No Action" ONCLICK="doTest(this.value);">&nbsp;
<INPUT TYPE="button" VALUE="Reset Action" ONCLICK="doTest(this.value);"></P>
<p><DIV align=left style='font-size:8.0pt' id="radiosig"></div>
<DIV align=left style='font-size:8.0pt' id="locatediv"></div></p>

</BODY>
</HTML>

