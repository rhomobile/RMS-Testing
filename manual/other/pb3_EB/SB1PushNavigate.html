<!--Push navigate sample (PC)-->

<html>
<head><script type="text/javascript" src="http://192.168.6.18/NEON/src/elements.js"></script>
<script>
   
   	//var to store the id for the thread
    var cancelMem = null;
  
    /******************************************************************************
		 *  This function is triggered the device has sent its response.  We will use 
		 *  this to cancel the timeout.
		 ****************************************************************************/   	
    function pushEvent()
    {
			clearTimeout(cancelMem);
			cancelMem = null;
   	}
   
		/******************************************************************************
		*  This function instructs the device to sound the beeper or cancel the beeper
		****************************************************************************/   	
		function doPush(func) {
			var ip = document.getElementById('ipadd').value;
			var VPath = document.getElementById('path').value;
			var portno = document.getElementById('portno').value;
			var passkey = document.getElementById('passkey').value;
			var appName = document.getElementById('appName').value;
			alert('Push Address:\n\nhttp://' + ip + ':' + portno + '/' + VPath + '?appName=' + appName + '&value=' + func + '&passkey=' + passkey);
			document.getElementById('iDevice').src = 'http://'+ip+':' + portno + '/'+VPath+'?appName='+appName+'&value='+func+'&passkey=' + passkey;
			//http://192.168.4.27:8080/push?name1=hello&name2=world&name3=Push&name4=Test&passkey=secret
			cancelMem = setTimeout(cancelPush, 20000);
			
		}
		
		/******************************************************************************
		*  This function is called if the device does not respond within 10 seconds
		****************************************************************************/   	
		function cancelPush()
		{
			document.getElementById('iDevice').src = 'blank.html';
			cancelMem = null;
			alert('Push Timed Out');
		}
   
</script>
</head>
	<body>
		IP: <input type="text" id="ipadd" value="192.168.6.148"><br>
		Path:   <input type="text" id="path" value="Application"><br>    
		PassKey: <input type="text" id="passkey" value="12345"><br>
		Port: <input type="text" id="portno" value="8080">
		appName: <input type="text" id="appName" value="Push">
		
		<br>
		<input type="button" onclick="Javascript:doPush('locate')" value="Locate">&nbsp;<input type="button" onclick="Javascript:doPush('stop')" value="Cancel"><br>
		
		<iframe id="iDevice" name="iDevice" FRAMEBORDER=0 SCROLLING="yes" height="1000" width="1000" onload="pushEvent();" ></iframe>
	</body>
</html>