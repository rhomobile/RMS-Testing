<html>
<head>
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
	<META HTTP-Equiv="MinimizeButton" content="visibility:Visible;top:30 " >
	<META HTTP-Equiv="quitbutton" Content="visibility:visible">
	<META HTTP-Equiv="ReloadButton" Content="visibility:visible">
	
    <script type="text/javascript" charset="utf-8" src="../../public/jquery/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="../../public/jquery/jquery.json-2.3.min.js"></script>

    <link type="image/png" rel="shortcut icon" href="../../public/jasmine/jasmine_favicon.png">
    <link type="text/css" rel="stylesheet" href="../../public/jasmine/jasmine.css">
    <script type="text/javascript" src="../../public/jasmine/jasmine.js"></script>
    <script type="text/javascript" src="../../public/jasmine/jasmine-html.js"></script>
    <script type="text/javascript" src="../../public/jasmine/jasmine.junit_reporter.js"></script>
    <script type="text/javascript" src="../helpers/rhologReporter.js"></script>
   	<script type="text/javascript" src="../../public/api/rhoapi-modules.js"></script>

	<!-- include Helper files here... -->
    <script type="text/javascript" src="../helpers/specHelpers.js"></script>
	<script type = "text/javascript">
  var i = 0;
  var j = 0;
  var srvHost = '';
    var srvPort = '';
    var srvURL = '';
    var httpsSrvURL = '';
 
    var srvHttpTestMethodsUrl = '';
    var srvHttpDownloadImageUrl = '';
    var srvHttpDownloadImageUrlAuth = '';
    var srvHttpUploadTextFileUrl = '';
    var srvHttpUploadTextFileUrlAuth = '';

    var srvHttpsTestMethodsUrl = '';

    function updateServerUrls() {
        srvHost = '10.233.85.82';
        srvPort = '8081';
        srvURL = 'http://'+srvHost+':'+srvPort.toString();
       // httpsSrvURL = 'https://'+SECURE_HOST+':'+SECURE_PORT;
 
        srvHttpTestMethodsUrl = srvURL + '/test_methods';
        srvHttpDownloadImageUrl = srvURL + '/download_image';
        srvHttpDownloadTextUrl = srvURL + '/download_file';
        srvHttpDownloadWavUrl = srvURL + '/download_wavfile';
        srvHttpDownloadImageUrlAuth = srvURL + '/download_image_auth';
        srvHttpUploadTextFileUrl = srvURL + '/upload_text_file';
        srvHttpUploadTextFileUrlAuth = srvURL + '/upload_text_file_auth';

        srvHttpsTestMethodsUrl = httpsSrvURL + '/test_methods';
    }

    updateServerUrls();
         
    var imagesDownloadFolder = Rho.RhoFile.join( Rho.Application.userFolder,'images' );
    Rho.RhoFile.makeDir(imagesDownloadFolder);
	  var download_file_callback = function (args){
            status = args['status'];
            //alert(args['status']);
            callbackCalled = true;
       }
    
	  function downloadfile1(){
	  	        
       i++;
	  	 var callbackCalled = false;
       var status = '';
       var fname = Rho.RhoFile.join(imagesDownloadFolder,"stress23.jpg");
       if ( Rho.RhoFile.exists(fname) ) {
                Rho.RhoFile.deleteFile(fname);
            }

           

            downloadfileProps = {
                url:srvHttpDownloadImageUrl,
                filename: fname
            };

            document.getElementById("tid").innerHTML = i;

            Rho.Network.downloadFile(downloadfileProps, download_file_callback);
            //alert(status);

	  	      setTimeout(function(){
              captureloop1();
            },30000)
	  	        
	   
	   }
     
     function captureloop1(){
      downloadfile1();
     }

     function downloadfile2(){
              
       i++;
       var callbackCalled = false;
       var status = '';
       var fname = Rho.RhoFile.join(imagesDownloadFolder,"test.txt");
       if ( Rho.RhoFile.exists(fname) ) {
                Rho.RhoFile.deleteFile(fname);
            }

           

            downloadfileProps = {
                url:srvHttpDownloadTextUrl,
                filename: fname
            };

            document.getElementById("tid").innerHTML = i;

            Rho.Network.downloadFile(downloadfileProps, download_file_callback);
            //alert(status);

            setTimeout(function(){
              captureloop2();
            },30000)
              
     
     }
     
     function captureloop2(){
      downloadfile2();
     }

     function downloadfile3(){
              
       i++;
       var callbackCalled = false;
       var status = '';
       var fname = Rho.RhoFile.join(imagesDownloadFolder,"test.wav");
       if ( Rho.RhoFile.exists(fname) ) {
                Rho.RhoFile.deleteFile(fname);
            }

           

            downloadfileProps = {
                url:srvHttpDownloadWavUrl,
                filename: fname
            };

            document.getElementById("tid").innerHTML = i;

            Rho.Network.downloadFile(downloadfileProps, download_file_callback);
            //alert(status);

            setTimeout(function(){
              captureloop3();
            },30000)
              
     
     }
     
     function captureloop3(){
      downloadfile3();
     }



     function uploadfile1(){

       j++;       
       var callbackCalled = false;
       var data = '';
       var status = '';
       var fname = Rho.RhoFile.join(Rho.Application.publicFolder,"/images/myfile.txt");

       var upload_file_callback = function (args){
        status = args['status'];
         //alert(args['status']);
        data = args['body'];
        callbackCalled = true;
       }

            var uploadfileProps = {
              url: srvHttpUploadTextFileUrl,
              filename: fname,
              body: "uploading file",
              fileContentType: "text/plain"
            };

            document.getElementById("tid").innerHTML = j;
            

            Rho.Network.uploadFile(uploadfileProps,upload_file_callback);
             
          
      

           setTimeout(function(){
                captureloopupload1();
                },30000)
            
              
     
     }
     
     function captureloopupload1(){
      uploadfile1();
     }

     function uploadfile2(){

       j++;       
       var callbackCalled = false;
       var data = '';
       var status = '';
       var fname = Rho.RhoFile.join(Rho.Application.publicFolder,"/images/toolbar.png");

       var upload_file_callback = function (args){
        status = args['status'];
         //alert(args['status']);
        data = args['body'];
        callbackCalled = true;
       }

            var uploadfileProps = {
              url: srvHttpUploadTextFileUrl,
              filename: fname,
              body: "uploading file",
              fileContentType: "text/plain"
            };

            document.getElementById("tid").innerHTML = j;
            

            Rho.Network.uploadFile(uploadfileProps,upload_file_callback);
             
          
      

           setTimeout(function(){
                captureloopupload2();
                },30000)
            
              
     
     }
     
     function captureloopupload2(){
      uploadfile2();
     }

      function uploadfile3(){

       j++;       
       var callbackCalled = false;
       var data = '';
       var status = '';
       var fname = Rho.RhoFile.join(Rho.Application.publicFolder,"/images/badfeeling.wav");

       var upload_file_callback = function (args){
        status = args['status'];
         //alert(args['status']);
        data = args['body'];
        callbackCalled = true;
       }

            var uploadfileProps = {
              url: srvHttpUploadTextFileUrl,
              filename: fname,
              body: "uploading file",
              fileContentType: "text/plain"
            };

            document.getElementById("tid").innerHTML = j;
            

            Rho.Network.uploadFile(uploadfileProps,upload_file_callback);
             
          
      

           setTimeout(function(){
                captureloopupload3();
                },30000)
            
              
     
     }
     
     function captureloopupload3(){
      uploadfile3();
     }



	 
     


	</script>

</head>
<body >
Network stress Tests
<br />
<br />

<button onclick = "downloadfile1();"> download an image  </button>
<button onclick = "downloadfile2();"> download a text file </button>
<button onclick = "downloadfile3();"> download an audio file </button>
<button onclick = "uploadfile1();"> upload a text file </button>
<button onclick = "uploadfile2();"> upload an image file </button>
<button onclick = "uploadfile3();"> upload an audio file</button>

<br>
<br>
<div id="tid"></div>
<div id="pid"></div>

<div><a href="../stress_index.html">Back</a></div>



</body>
</html>