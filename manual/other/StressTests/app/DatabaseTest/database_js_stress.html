<html>
<head>
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
	<META HTTP-Equiv="MinimizeButton" content="visibility:Visible;top:30 " >
	<META HTTP-Equiv="quitbutton" Content="visibility:visible">
	<META HTTP-Equiv="ReloadButton" Content="visibility:visible">
	
    <script type="text/javascript" charset="utf-8" src="../../public/jquery/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="../../public/jquery/jquery.json-2.3.min.js"></script>

    <link type="image/png" rel="shortcut icon" href="../../public/jasmine/jasmine_favicon.png">
    <link type="text/css" rel="stylesheet" href="../../public/jasmine/jasmine.css">
    <script type="text/javascript" src="../../public/jasmine/jasmine.js"></script>
    <script type="text/javascript" src="../../public/jasmine/jasmine-html.js"></script>
    <script type="text/javascript" src="../../public/jasmine/jasmine.junit_reporter.js"></script>
    <script type="text/javascript" src="../helpers/rhologReporter.js"></script>
   	<script type="text/javascript" src="../../public/api/rhoapi-modules.js"></script>

	<!-- include Helper files here... -->
    <script type="text/javascript" src="../helpers/specHelpers.js"></script>
	<script type = "text/javascript">
  var callbackStatus = false;
  var db;
  var i = 0;
  db = new Rho.Database(Rho.Application.databaseFilePath('local'), 'local');
  var tableName = "abc"; 
  db.destroyTable(tableName);
  var dbCallBack = function (args) {
                                             callbackStatus = true; 
                                             
                                    };


                           

                                                            
  function transaction() { 
  i++;
  document.getElementById("tid").innerHTML = i;
  callbackStatus = false;                                                          
  db.executeSql('CREATE TABLE "' + tableName + '" (x INTEGER,y TEXT)');
  db.executeBatchSql('INSERT INTO "' + tableName + '" (x,y) VALUES (1, "abcd");');
  dbCallBack();
  db.commitTransaction();
  setTimeout(function(){
  captureloop();  
  }, 6000);

  //captureloop();                                                            
                           
  }

  function captureloop(){
  db.destroyTable(tableName);
  transaction();
  }


	 
     


	</script>

</head>
<body >
Database stress Tests
<br />
<br />

<button onclick = transaction();> Database Transaction </button>


<br>
<br>
<div id="tid"></div>
<div id="pid"></div>

<div><a href="../stress_index.html">Back</a></div>



</body>
</html>