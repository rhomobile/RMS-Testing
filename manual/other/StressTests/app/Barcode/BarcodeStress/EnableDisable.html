<html>
<head>
	<title>Barcode Stress Test</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
	<META HTTP-Equiv="MinimizeButton" content="visibility:Visible;top:30 " >
	<META HTTP-Equiv="quitbutton" Content="visibility:visible">
	<META HTTP-Equiv="ReloadButton" Content="visibility:visible">
	
    <script type="text/javascript" charset="utf-8" src="/public/jquery/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="/public/jquery/jquery.json-2.3.min.js"></script>
    <script type="text/javascript" src="/public/api/rhoapi-modules.js"></script>
  	<script type = "text/javascript">
      var enumData;
      var barcodetype;
      var barcodeObj;
      var count = 0;
      enumData = Rho.Barcode.enumerate();
      var enumFunc = function() {
             // enumData = Rho.Barcode.enumerate();       
        		if (enumData.length > 0){
          				for (i=0; i < enumData.length; i++){
                		document.getElementById('barcodedropdown').options[i + 1].text = enumData[i].getProperty('ID') + ' ' + enumData[i].getProperty('friendlyName');
              			document.getElementById('barcodedropdown').options[i + 1].value = enumData[i].getProperty('ID');
              			
              			//var scntype = objSCN.getProperty('scannerType'); //not working for WM/CE sends Unavailable
          				}
        			}else{
          			alert("Barcode not available in this device");
        			}
			}
				
	var	selectBarcode =  function(){		
		 		var w = document.getElementById('barcodedropdown').selectedIndex;
        		barcodetype = document.getElementById('barcodedropdown').options[w].value; 
        		//alert("barcodetype =" +barcodetype);
        		//alert("Selected Index =" +w);
        		barcodeObj = enumData[--w];
        		//alert("barcodeObj =" +barcodeObj);
		}
	
		
	var Barcode_start =  function (){
		document.getElementById("mycount").innerHTML="Count:"+count;
		barcodeObj.enable();
		barcodeObj.start();
		count++;
			setTimeout (function (){
				Barcode_stop();
			},5000);
		document.getElementById("msg").innerHTML="Barcode Enabled";
	}
	
	var Barcode_stop = function(){
		barcodeObj.stop();
		barcodeObj.disable();
		setTimeout(function (){
				Barcode_start();
			},5000);
		document.getElementById("msg").innerHTML="Barcode Disabled";
	}
  	</script>

</head>
<body >
Barcode Stress - Continuous enable & disable the camera/imager 1
<br />
<p>Enables & Disables the Barcode camera/imager with duration of 10secs.</p>

<button onclick="enumFunc();">Enumerate Barcode</button><br><br>
<span class="heading">
  Select the Barcode: &nbsp;&nbsp;<select name="barcodedropdown" id="barcodedropdown" onChange="selectBarcode()">
    <option value="" selected>--Select Camera--</option>
    <option value={}></option>
    <option value={}></option>
  </select>
</span>

<br>
<br>
<button onclick="Barcode_start();">Run Test</button><br><br>
<div id="mycount"></div>
<div id="msg"></div>

<button onclick="location.href='../cam_index.html'"> Back </button>



</body>
</html>