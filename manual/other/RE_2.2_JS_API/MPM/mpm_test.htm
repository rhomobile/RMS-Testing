<?xml version="1.0" encoding="UTF-8"?>
<html>
  <head>
    <title>Motorola Solutions MPM Test Application</title>
    <META HTTP-Equiv="AddressBar" Content="visibility:hidden">
  </head>
  
  <body>
    MPM TEST APPLICATION  
    <p/>  
	<input type="button" value="Back to Menu" onclick="window.location.href='index.html'">
	<input type="button" value="Quit" onclick="quitRE();" />
	<br>
	DataEvent Result:-<div id="myresultdiv"></div><BR>
	<br/>
	<button type="button" onclick="SetDataEventMPM()">SetDataEvent</button>
	<hr>
	passkey:-<Textarea id="txtpasskey" cols="10" rows="1">BA083AB1-E998-4436-841A-636B17E60E70</Textarea>
    comport:-<Textarea id="txtcomport" cols="10" rows="1">COM5</Textarea>  
    <br> 
    <button type="button" onclick="OpenMPM()">Open</button>
    <hr>
    <button type="button" onclick="GetBatteryLevelMPM()" >GetBatteryLevel</button>		
	<button type="button" onclick="EnableKeyPadMPM()" >EnableKeyPad</button>    
	<button type="button" onclick="EnableKeyBeepMPM()"  >EnableKeyBeep</button>  
	<button type="button" onclick="DisableKeyBeepMPM()"  >DisableKeyBeep</button>
	<button type="button" onclick="DisableKeyPadMPM()"  >DisableKeyPad</button>
	<button type="button" onclick="RemoveCard()"  >RemoveCard</button>
	<hr>
	<button type="button" onclick="CancelPrevMethodMPM()"  >CancelPrevMethod</button>
	<hr>
	<button type="button" onclick="CloseMPM()"  >Close</button>	
	<hr>
	Amount: <Textarea id="txtamount" cols="10" rows="1">20</Textarea>
    OtherAmount: <Textarea id="txtotheramount" cols="10" rows="1">10</Textarea>   
    ReadMode: <Textarea id="txtreadmode" cols="10" rows="1">2</Textarea>
	<br>
	<button type="button" onclick="ReadCardDataMPM()"  >ReadCardData</button>
	
	<hr>
	
	
	accountno<Textarea id="txtaccountno" cols="10" rows="1">1234567812349090</Textarea>
	allowemptypin<select name="select_allowemptypin" id="select_allowemptypin">
    <OPTION VALUE="TRUE">TRUE</OPTION>
    <option value="FALSE">False</option>
    <option value="aaaa">Invalid String(aaaa)</option>
    <option value="">EmptyString</option>
    </select>
	minlength<Textarea id="txtminlength" cols="10" rows="1">4</Textarea>
    maxlength<Textarea id="txtmaxlength" cols="10" rows="1">12</Textarea>  
    message1<Textarea id="txtmessage1" cols="10" rows="1">Enter PIN</Textarea>  
    message2<Textarea id="txtmessage2" cols="10" rows="1">Please</Textarea>
    processingmessage<Textarea id="txtprocessingmessage" cols="10" rows="1">PIN getting processed</Textarea>  
	<br>
	<button type="button" onclick="PromptPINMPM()"  >PromptPIN</button>
	
	<hr>	
	
	message1<Textarea id="txtmessage1promptmenu" cols="10" rows="1">Please</Textarea>
    message2<Textarea id="txtmessage2promptmenu" cols="10" rows="1">Select</Textarea>  
    choice1<Textarea id="txtchoice1" cols="10" rows="1">Credit</Textarea>  
    choice2<Textarea id="txtchoice2" cols="10" rows="1">Debit</Textarea>
    choice3<Textarea id="txtchoice3" cols="10" rows="1">Othercards1</Textarea>  
    choice4<Textarea id="txtchoice4" cols="10" rows="1">Othercards2</Textarea>
    <br>
    <button type="button" onclick="PromptMenuMPM()"  >PromptMenu</button>
	
	<hr>
	
	message1<Textarea id="txtmessage1promptmessage" cols="10" rows="1">mymessage1</Textarea>
    message2<Textarea id="txtmessage2promptmessage" cols="10" rows="1">mymessage2</Textarea>  
    message3<Textarea id="txtmessage3promptmessage" cols="10" rows="1">mymessage3</Textarea>  
    message4<Textarea id="txtmessage4promptmessage" cols="10" rows="1">mymessage4</Textarea>
    userconfirmation<select name="select_userconfirmation" id="select_userconfirmation">
    <OPTION VALUE="TRUE">true</OPTION>
    <option value="FALSE">false</option>
    <option value="aaaa">Invalid String(aaaa)</option>
    <option value="">EmptyString</option>
    </select>
    <br>
	<button type="button" onclick="PromptMessageMPM()"  >PromptMessage</button>
    
    <hr>
	
    amount<Textarea id="txtamount_promptadditionalinfo" cols="10" rows="1">400</Textarea>
    languagecode<Textarea id="txtlanguagecode" cols="10" rows="1">0</Textarea>  
    surcharge<Textarea id="txtsurcharge" cols="10" rows="1">30</Textarea>  
    tip<select name="select_tip" id="select_tip">
    <OPTION VALUE="TRUE">true</OPTION>
    <option value="FALSE">false</option>
    <option value="aaaa">Invalid String(aaaa)</option>
    <option value="">EmptyString</option>
    </select>
    cashback<select name="select_cashback" id="select_cashback">
    <OPTION VALUE="TRUE">true</OPTION>
    <option value="FALSE">false</option>
    <option value="aaaa">Invalid String(aaaa)</option>
    <option value="">EmptyString</option>
    </select>
    <br>
	<button type="button" onclick="PromptAdditionalInfoMPM()"  >PromptAdditionalInfo</button>

	<hr>
    macdata:-<Textarea id="txtmacdata" cols="10" rows="1">aaaaaaaaaaaa</Textarea>
    <br>
	<button type="button" onclick="CreateMAC()"  >CreateMAC</button>
	<hr>
	TagIDs:-<Textarea id="txtTagIDs" cols="10" rows="1">11|22|33</Textarea>
	TagValues:-<Textarea id="txtTagValues" cols="10" rows="1">11|22|33</Textarea>
	<br>	
	<button type="button" onclick="SetEMVTags()"  >SetEMVTags</button>
	<hr>
	TagIDs:-<Textarea id="txtGetTagIDs" cols="10" rows="1">11|22|33</Textarea>
    <br>	
	<button type="button" onclick="GetEMVTags()"  >GetEMVTags</button>
	<hr>
	HostDecision:-<Textarea id="txtHostDecision" cols="10" rows="1">0</Textarea>
	TagIDs:-<Textarea id="txtEMVTagIDs" cols="10" rows="1">11|22|33</Textarea>
	TagValues:-<Textarea id="txtEMVTagValues" cols="10" rows="1">11|22|33</Textarea>
	DisplayResult<select name="select_DisplayResult" id="select_DisplayResult">
    <OPTION VALUE="TRUE">true</OPTION>
    <option value="FALSE">false</option>
    <option value="aaaa">Invalid String(aaaa)</option>
    <option value="">EmptyString</option>
    </select>
    <br>
	<button type="button" onclick="CompleteOnlineEMV()"  >CompleteOnlineEMV</button>
	<hr>
	u8MACBlock:-<Textarea id="txtu8MACBlock" cols="10" rows="1">aaaaaaaa</Textarea>
	LangCode:-<Textarea id="txtLangCode" cols="10" rows="1">0</Textarea>
	u8TPKKey:-<Textarea id="txtu8TPKKey" cols="10" rows="1">bbb</Textarea>
	u8TAKKey:-<Textarea id="txtu8TAKKey" cols="10" rows="1">ccc</Textarea>
	message1<Textarea id="txtmessage1_ValidateMAC" cols="10" rows="1">Please</Textarea>
    message2<Textarea id="txtmessage2_ValidateMAC" cols="10" rows="1">Select</Textarea>
    u8MACData:-<Textarea id="txtu8MACData" cols="10" rows="1">aaaaaaaaaaaa</Textarea>
	<br>
	<button type="button" onclick="ValidateMAC()"  >ValidateMAC</button>
	<hr>
	amount:-<Textarea id="Textarea_amount" cols="10" rows="1">123</Textarea>
    OtherAmount:-<Textarea id="Textarea_OtherAmount" cols="10" rows="1">12</Textarea>   
    MerchantDecision:-<Textarea id="txtMerchantDecision" cols="10" rows="1">0</Textarea>
    Tags:-<Textarea id="txtTags" cols="10" rows="1">11|22|33</Textarea>
    DisplayResult<select name="select_DisplayResult" id="select_DisplayResult_AuthorizeCard">
    <OPTION VALUE="TRUE">true</OPTION>
    <option value="FALSE">false</option>
    <option value="aaaa">Invalid String(aaaa)</option>
    <option value="">EmptyString</option>
    </select>
    PINTryExceedStatus<select name="select_PINTryExceedStatus" id="select_PINTryExceedStatus">
    <OPTION VALUE="TRUE">true</OPTION>
    <option value="FALSE">false</option>
    <option value="aaaa">Invalid String(aaaa)</option>
    <option value="">EmptyString</option>
    </select>
    DisplayAmount<select name="select_DisplayAmount" id="select_DisplayAmount">
    <OPTION VALUE="TRUE">true</OPTION>
    <option value="FALSE">false</option>
    <option value="aaaa">Invalid String(aaaa)</option>
    <option value="">EmptyString</option>
    </select>
    DisplayAppExpired<select name="select_DisplayAppExpired" id="select_DisplayAppExpired">
    <OPTION VALUE="TRUE">true</OPTION>
    <option value="FALSE">false</option>
    <option value="aaaa">Invalid String(aaaa)</option>
    <option value="">EmptyString</option>
    </select>
    <br>
	<button type="button" onclick="AuthorizeCard()"  >AuthorizeCard</button>
	<hr>
       
	<script type="text/javascript">
	  function dataEventFunction(data, method)
	  {
	   myresultdiv.innerHTML="Data:-  "+data+"\r\n  Method:- "+method;
	   alert("Data:-  "+data+"\r\nMethod:- "+method);
	  }  
	  	
	  function quitRE()
      {
       generic.InvokeMETAFunction('Application', 'Quit');
      }
      
	  function OpenMPM()
	  {
	    //mpm.open("BA083AB1-E998-4436-841A-636B17E60E70", "COM5");
	    //alert(txtpasskey.value);
	    //alert(txtcomport.value);
	    alert("Before Open");
	    mpm.open(txtpasskey.value, txtcomport.value);
	    alert("open called");
	  }
	  function PromptMessageWithConfirmationMPM()
	  {
 	    mpm.promptmessage("Total Amount", "5200.00", "", "Is it OK?", true);
	  }
	  function EnableKeyPadMPM()
	  {
 	    mpm.enablekeypad();
	  }
	  function EnableKeyBeepMPM()
	  {
		mpm.enablekeybeep();
	  }
	  function DisableKeyBeepMPM()
	  {
		mpm.disablekeybeep();
	  }
	  function DisableKeyPadMPM()
	  {
 	    mpm.disablekeypad();
	  }
	  function SetDataEventMPM()
	  {	  	
	  	mpm.DataEvent = "url('JavaScript:dataEventFunction('%s','%s');')";
	  }
	  function PromptMenuMPM()
	  {	  	
	  
		mpm.promptmenu(txtmessage1promptmenu.value,txtmessage2promptmenu.value,txtchoice1.value,txtchoice2.value,txtchoice3.value,txtchoice4.value);
	  }
	  function PromptMessageMPM()
	  {	  	
		//mpm.promptmessage("message1", "message2", "message3", "message4", false);
		
		var SelIndex =   select_userconfirmation.selectedIndex;
        var userconfirmationvalue =  select_userconfirmation.options[SelIndex].value;
        //alert(userconfirmationvalue);
		mpm.promptmessage(txtmessage1promptmessage.value,txtmessage2promptmessage.value, txtmessage3promptmessage.value,txtmessage4promptmessage.value, userconfirmationvalue);
	  }
	  function ReadCardDataMPM()
	  {
 	    mpm.readcarddata(txtamount.value, txtotheramount.value, txtreadmode.value);
	  }
	  function PromptAdditionalInfoMPM()
	  {
 	    //mpm.promptadditionalinfo(50,0,true,true,0);
 	    var SelIndex =   select_tip.selectedIndex;
        var tipvalue =  select_tip.options[SelIndex].value;
        
        var SelIndex2 =   select_cashback.selectedIndex;
        var cashbackvalue =  select_cashback.options[SelIndex2].value;
        
 	    mpm.promptadditionalinfo(txtamount_promptadditionalinfo.value,txtlanguagecode.value,tipvalue,cashbackvalue,txtsurcharge.value);
	  }
	  function PromptPINMPM()
	  {
 	    //mpm.promptpin("0123456789012345", 4, 12, true, "ENTER", "PIN", "PROCESSING");
 	    var SelIndex =   select_allowemptypin.selectedIndex; 
        var allowemptypinvalue =  select_allowemptypin.options[SelIndex].value;
        
        //var minlen =SetproperDataType(txtminlength.value);
        //var maxlen =SetproperDataType(txtmaxlength.value);
         mpm.promptpin(txtaccountno.value,txtminlength.value,txtmaxlength.value,allowemptypinvalue, txtmessage1.value, txtmessage2.value, txtprocessingmessage.value);
        
          
	  }
	  
//	  function SetproperDataType(variablevalue)
//	  {
//	  var propervalue;
//	  if(variablevalue=="")
//	  {
//	  propervalue="";
//	  }
//	  else
//	  {
//	  if(isNaN(variablevalue))
//	  {
//	  propervalue=variablevalue;
//	  }
//	  else
//	  {
//	  propervalue=parseInt(variablevalue);
//	  }
//	  return propervalue;
//	  }
//	  }
	  
	  function CancelPrevMethodMPM()
	  {
 	    mpm.cancelprevmethod();
	  }
	  function GetBatteryLevelMPM()
	  {
 	    mpm.getbatterylevel();
	  }
	  function CreateMAC()
	  {
 	    mpm.createmac(txtmacdata.value);
	  }
	  function CloseMPM()
	  {	  	
	  	mpm.close();
	  }	  
	  function SetEMVTags()
	  {
//        var tagIDs  = "11|22|33"; 	
//        var tagValues  = "11|22|33"; 
        mpm.setemvtags(txtTagIDs.value,txtTagValues.value);
//        mpm.setemvtags("11|22|33", "11|22|33");
	  }
	  function GetEMVTags()
	  {
//        var tagIDs  = "11|22|33"; 	
	  	mpm.getemvtags(txtGetTagIDs.value);
//	  	mpm.getemvtags("11|22|33");
	  }	  
	  function ValidateMAC()
	  {
	  	mpm.validatemac(txtu8MACBlock.value,txtLangCode.value, txtu8TPKKey.value, txtu8TAKKey.value, txtmessage1_ValidateMAC.value,txtmessage2_ValidateMAC.value, txtu8MACData.value);
	  }	  
	  function CompleteOnlineEMV()
	  {
//        var tagIDs  = "11|22|33"; 	
//        var tagValues  = "11|22|33"; 
 	    var SelIndex =   select_DisplayResult.selectedIndex; 
        var DisplayResult =  select_DisplayResult.options[SelIndex].value;
	  	mpm.completeonlineemv(txtHostDecision.value, DisplayResult, txtEMVTagIDs.value, txtEMVTagValues.value);
	  }
	  function AuthorizeCard()
	  {
//        var tagIDs  = "11|22|33";
 	    var SelIndex =   select_DisplayResult_AuthorizeCard.selectedIndex;
        var DisplayResult =  select_DisplayResult_AuthorizeCard.options[SelIndex].value;
        
        var SelIndex2 =   select_PINTryExceedStatus.selectedIndex;
        var PINTryExceedStatus =  select_PINTryExceedStatus.options[SelIndex2].value;
        
        var SelIndex3 =   select_DisplayAmount.selectedIndex;
        var DisplayAmount =  select_DisplayAmount.options[SelIndex3].value;
        
        var SelIndex4 =   select_DisplayAppExpired.selectedIndex;
        var DisplayAppExpired =  select_DisplayAppExpired.options[SelIndex4].value;
        
	  	mpm.authorizecard(Textarea_amount.value,Textarea_OtherAmount.value,txtMerchantDecision.value,txtTags.value, DisplayResult, PINTryExceedStatus, DisplayAmount, DisplayAppExpired);
	  }
	  function RemoveCard()
	  {
	  	mpm.removecard("","");
	  }
	</script>  	     
  </body>
  <footer>
    <p>Copyright 2011-2012 Motorola Solutions Inc.</p>
  </footer>
</html>

