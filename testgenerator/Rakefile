require 'fileutils'
require 'yaml'
require 'rake'

namespace :generate do
	namespace :js do
		
		desc "Generates Barcode Property SET/GET Test"
		task :barcode do
			Rake::Task['generate:xmltoymal:barcode'].execute
			require File.dirname(__FILE__) + "/Barcode/generate_barcode_spec.rb"
			require File.dirname(__FILE__) + "/generate_spec.rb"
			generate_js_barcode_spec
			cmd = "js-beautify -f ./Barcode/#{$file_name} -o ./Barcode/#{$file_name}"
			exec cmd
		end

		desc "Generates CardReader Property SET/GET Test"
		task :cardreader do
			Rake::Task['generate:xmltoymal:cardreader'].execute
			require File.dirname(__FILE__) + "/Cardreader/generate_cardreader_spec.rb"
			require File.dirname(__FILE__) + "/generate_spec.rb"
			generate_js_barcode_spec
			cmd = "js-beautify -f ./Cardreader/#{$file_name} -o ./Cardreader/#{$file_name}"
			exec cmd
		end

		desc "Generates Signature Property SET/GET Test"
		task :signature do
			Rake::Task['generate:xmltoymal:signature'].execute
			require File.dirname(__FILE__) + "/Signature/generate_signature_spec.rb"
			require File.dirname(__FILE__) + "/generate_spec.rb"
			generate_js_signature_spec
			cmd = "js-beautify -f ./Signature/#{$file_name} -o ./Signature/#{$file_name}"
			exec cmd
		end

		desc "Generates Camera Property SET/GET Test"
		task :camera do
			Rake::Task['generate:xmltoymal:camera'].execute
			require File.dirname(__FILE__) + "/Camera/generate_camera_spec.rb"
			require File.dirname(__FILE__) + "/generate_spec.rb"
			generate_js_camera_spec
			cmd = "js-beautify -f ./Camera/#{$file_name} -o ./Camera/#{$file_name}"
			exec cmd
		end

		desc "Generates AudioCapture Property SET/GET Test"
		task :audiocapture do
			Rake::Task['generate:xmltoymal:audiocapture'].execute
			require File.dirname(__FILE__) + "/AudioCapture/generate_audiocapture_spec.rb"
			require File.dirname(__FILE__) + "/generate_spec.rb"
			generate_js_audiocapture_spec
			cmd = "js-beautify -f ./AudioCapture/#{$file_name} -o ./AudioCapture/#{$file_name}"
			exec cmd
		end
		
		desc "Generate Constant Tests"
		task :rhoconstants do
			Rake::Task['generate:xmltoymal:application'].execute
			Rake::Task['generate:xmltoymal:audiocapture'].execute
			Rake::Task['generate:xmltoymal:barcode'].execute
			Rake::Task['generate:xmltoymal:cardreader'].execute
			Rake::Task['generate:xmltoymal:camera'].execute
			Rake::Task['generate:xmltoymal:battery'].execute
			Rake::Task['generate:xmltoymal:database'].execute
			Rake::Task['generate:xmltoymal:dpx'].execute
			Rake::Task['generate:xmltoymal:intent'].execute
			Rake::Task['generate:xmltoymal:keycapture'].execute
			Rake::Task['generate:xmltoymal:keystate'].execute
			Rake::Task['generate:xmltoymal:log'].execute
			Rake::Task['generate:xmltoymal:mediaplayer'].execute
			Rake::Task['generate:xmltoymal:nativemenubar'].execute
			Rake::Task['generate:xmltoymal:nativetabbar'].execute
			Rake::Task['generate:xmltoymal:nativetoolbar'].execute
			Rake::Task['generate:xmltoymal:navbar'].execute
			Rake::Task['generate:xmltoymal:network'].execute
			Rake::Task['generate:xmltoymal:notification'].execute
			Rake::Task['generate:xmltoymal:orm'].execute
			Rake::Task['generate:xmltoymal:printer'].execute
			Rake::Task['generate:xmltoymal:printerzebra'].execute
			Rake::Task['generate:xmltoymal:push'].execute
			Rake::Task['generate:xmltoymal:rhofile'].execute
			Rake::Task['generate:xmltoymal:screenorientation'].execute
			Rake::Task['generate:xmltoymal:sensor'].execute
			Rake::Task['generate:xmltoymal:signature'].execute
			Rake::Task['generate:xmltoymal:signalindicators'].execute
			Rake::Task['generate:xmltoymal:system'].execute
			Rake::Task['generate:xmltoymal:webview'].execute

			require File.dirname(__FILE__) + "/rhoconstants/generate_rhoconstant_spec.rb"
			File.open($path_to_spec, 'w') do |f|
				f.puts "var arrConstants = new Array();"
			end
			generate_js_spec "Application"
			generate_js_spec "AudioCapture"
			generate_js_spec "Barcode"
			generate_js_spec "CardReader"
			generate_js_spec "Camera"
			generate_js_spec "Battery"
			generate_js_spec "Database"
			generate_js_spec "Dpx"
			generate_js_spec "Intent"
			generate_js_spec "KeyCapture"
			generate_js_spec "KeyState"
			generate_js_spec "Log"
			generate_js_spec "MediaPlayer"
			generate_js_spec "NativeMenubar"
			generate_js_spec "NativeTabbar"
			generate_js_spec "NativeToolbar"
			generate_js_spec "Navbar"
			generate_js_spec "Network"
			generate_js_spec "Notification"
			generate_js_spec "Orm"
			generate_js_spec "Printer"
			generate_js_spec "PrinterZebra"
			generate_js_spec "Push"
			generate_js_spec "Rhofile"
			generate_js_spec "ScreenOrientation"
			generate_js_spec "Sensor"
			generate_js_spec "Signature"
			generate_js_spec "SingalIndicators"
			generate_js_spec "System"
			generate_js_spec "Webview"

			#Generate IT for constant tests
			generate_constant_it

			cmd = "js-beautify -f ./rhoconstants/#{$file_name} -o ./rhoconstants/#{$file_name}"
			exec cmd

		end
	end
	namespace :ruby do
		task :barcode do
			require File.dirname(__FILE__) + "/Barcode/generate_barcode_spec.rb"
			require File.dirname(__FILE__) + "/generate_spec.rb"
			generate_ruby_barcode_spec
		end
	end
	
	namespace :xmltoymal do
		require File.dirname(__FILE__) + "/xmltoymal.rb"
				
		#desc "Converts xml to ymal"
		task :barcode do
			module_xmltoymal PATH_BARCODE, "Barcode"
		end

		#desc "Converts xml to ymal"
		task :cardreader do
			module_xmltoymal PATH_CARDREADER, "CardReader"
		end

		#desc "Converts xml to ymal"
		task :signature do
			module_xmltoymal PATH_SIGNATURE, "Signature"
		end

		#desc "Converts xml to ymal"
		task :camera do
			module_xmltoymal PATH_CAMERA, "Camera"
		end

		#desc "Converts xml to ymal"
		task :audiocapture do
			module_xmltoymal PATH_AUDIOCAPTURE, "AudioCapture"
		end
		
		#desc "Converts xml to ymal"
		task :application do
			module_xmltoymal PATH_APPLICATION, "Application"
		end
		
		#desc "Converts xml to ymal"
		task :battery do
			module_xmltoymal PATH_BATTERY, "Battery"
		end
		
		#desc "Converts xml to ymal"
		task :database do
			module_xmltoymal PATH_DATABASE, "Database"
		end
		
		#desc "Converts xml to ymal"
		task :dpx do
			module_xmltoymal PATH_DPX, "Dpx"
		end
		
		#desc "Converts xml to ymal"
		task :intent do
			module_xmltoymal PATH_INTENT, "Intent"
		end
		
		#desc "Converts xml to ymal"
		task :keycapture do
			module_xmltoymal PATH_KEYCAPTURE, "KeyCapture"
		end
		
		#desc "Converts xml to ymal"
		task :keystate do
			module_xmltoymal PATH_KEYSTATE, "KeyState"
		end
		
		#desc "Converts xml to ymal"
		task :log do
			module_xmltoymal PATH_LOG, "Log"
		end
		
		#desc "Converts xml to ymal"
		task :mediaplayer do
			module_xmltoymal PATH_MEDIAPLAYER, "MediaPlayer"
		end
		
		#desc "Converts xml to ymal"
		task :nativemenubar do
			module_xmltoymal PATH_NATIVEMENUBAR, "NativeMenubar"
		end
		
		#desc "Converts xml to ymal"
		task :nativetabbar do
			module_xmltoymal PATH_NATIVETABBAR, "NativeTabbar"
		end
		
		#desc "Converts xml to ymal"
		task :nativetoolbar do
			module_xmltoymal PATH_NATIVETOOLBAR, "NativeToolbar"
		end
		
		#desc "Converts xml to ymal"
		task :navbar do
			module_xmltoymal PATH_NAVBAR, "Navbar"
		end
		
		#desc "Converts xml to ymal"
		task :network do
			module_xmltoymal PATH_NETWORK, "Network"
		end
		
		#desc "Converts xml to ymal"
		task :notification do
			module_xmltoymal PATH_NOTIFICATION, "Notification"
		end
		
		#desc "Converts xml to ymal"
		task :orm do
			module_xmltoymal PATH_ORM, "Orm"
		end
		
		#desc "Converts xml to ymal"
		task :printer do
			module_xmltoymal PATH_PRINTER, "Printer"
		end
		
		#desc "Converts xml to ymal"
		task :printerzebra do
			module_xmltoymal PATH_PRINTERZEBRA, "PrinterZebra"
		end
		
		#desc "Converts xml to ymal"
		task :push do
			module_xmltoymal PATH_PUSH, "Push"
		end
		
		#desc "Converts xml to ymal"
		task :rhoconnectclient do
			module_xmltoymal PATH_RHOCONNECTCLIENT, "RhoconnectClient"
		end
		
		#desc "Converts xml to ymal"
		task :rhofile do
			module_xmltoymal PATH_RHOFILE, "Rhofile"
		end
		
		#desc "Converts xml to ymal"
		task :screenorientation do
			module_xmltoymal PATH_SCREENORIENTATION, "ScreenOrientation"
		end
		
		#desc "Converts xml to ymal"
		task :sensor do
			module_xmltoymal PATH_SENSOR, "Sensor"
		end
		
		#desc "Converts xml to ymal"
		task :signature do
			module_xmltoymal PATH_SIGNATURE, "Signature"
		end
		
		#desc "Converts xml to ymal"
		task :signalindicators do
			module_xmltoymal PATH_SIGNALINDICATORS, "SingalIndicators"
		end
		
		#desc "Converts xml to ymal"
		task :system do
			module_xmltoymal PATH_SYSTEM, "System"
		end
		
		#desc "Converts xml to ymal"
		task :webview do
			module_xmltoymal PATH_WEBVIEW, "Webview"
		end
	end
	
	task :testcase, :pathtoxml, :sheetno do |t,args|
		require File.dirname(__FILE__) + "/generate_manual_spec.rb"
		#if filepath == 'http'
			generate_test_from_google_xls args.pathtoxml, args.sheetno
		#elsif filepath == 'local'
			#generate_test_from_ms_xls
		#end
		cmd = "js-beautify -f ./#{$file_name} -o ./#{$file_name}"
		exec cmd
	end
end

